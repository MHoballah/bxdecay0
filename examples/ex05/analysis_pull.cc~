#include <iostream>
#include <fstream>
#include <cmath>
#include <vector>
#include <string>

#include <TROOT.h>
#include <TStyle.h>
#include <TH1F.h>
#include <TF1.h>
#include <TCanvas.h>
#include <TStyle.h>
#include <TGraphErrors.h>

#ifndef __CINT__
#include "RooGlobalFunc.h"
#endif
#include "RooRealVar.h"
#include "RooDataSet.h"
#include "RooGaussian.h"
#include "RooConstVar.h"
#include "TCanvas.h"
#include "TAxis.h"
#include "RooPlot.h"
#include "RooHist.h"
using namespace RooFit ;

void analysis()
{
  TFile file("DataSimulated.root", "READ");
  TTree *Energy1  = (TTree*) datafile->Get("Energy1");
  RooArgSet data_e1("data_e1","data_e1",RooArgSet(Energy1));
  RooDataSet energy1("E1", "Energy1", Energy1, data_e1, 0, 0 );
  RooPlot *frame1 = x.frame(Title("Data with distorted Gaussian pdf"), Bins(40));
  TF1 *fit = new TF1("fit_org", "[0]*exp(-0.5*((x-[1])/[2])*((x-[1])/[2]))", -0.05, 2.30);
  fit->SetParameter(0,4.95120e-02);
  fit->SetParameter(1,3.37354e-01);
  fit->SetParameter(2,5.52107e-01);
  //fit_ft->FillRandom("fit_org", 5000);
  
  energy1->plotOn(frame1, DataError(RooAbsData::SumW2));
  fit.plotOn(frame1);

 
}
