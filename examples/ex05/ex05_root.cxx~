// Copyright 2017 Fran√ßois Mauger <mauger@lpccaen.in2p3.fr>

// Standard library:
#include <iostream>
#include <fstream>

#include <TROOT.h>
#include <TStyle.h>

#include <TFile.h>
#include <TTree.h>
#include <TChain.h>
#include <TCanvas.h>
#include <TH1F.h>

int main()
{
  
  ///For Analysis, RootFile
  double Energy1, Energy2, EnergySum, Cos12;
  TFile *datafile = TFile::Open("DataSimulated.root", "RECREATE");
  TTree *Energy_1  = new TTree("Energy1","Energy1");
  Energy_1->Branch("Energy1", &Energy1, "Energy1/D");
  TTree *Energy_2  =new TTree("Energy2","Energy2");
  Energy_2->Branch("Energy2", &Energy2, "Energy2/D");
  TTree *Energy_sum  = new TTree("EnergySum","EnergySum");
  Energy_sum->Branch("EnergySum", &EnergySum, "EnergySum/D");
  TTree *Cos_12  = new TTree("Cos12","Cos12");
  Cos_12->Branch("Cos12", &Cos12, "Cos12/D");

  ///End RootFile Creation

  {
    std::ifstream fout1("bxdecay0_ex05_1.data");
    std::ifstream fout2("bxdecay0_ex05_2.data");
    std::ifstream fout3("bxdecay0_ex05_3.data");
    std::ifstream fout4("bxdecay0_ex05_4.data");
    
    while(fout1.good()){
      double e1;
      double e2;
      double esum;
      double cos12;
      fout1 >> e1;
      fout2 >> e2;
      fout3 >> esum;
      fout4 >> cos12;
 
    ///Fill RootFile
    Energy1 = e1;
    Energy_1->Fill();
    Energy2 = e2;
    Energy_2->Fill();
    EnergySum = esum;
    Energy_sum->Fill();
    Cos12 = cos12;
    Cos_12->Fill();

    }
  }
  datafile->Write();
  datafile->Close();

  TFile *datafile = TFile::Open("DataSimulated.root", "READ");
  
}
